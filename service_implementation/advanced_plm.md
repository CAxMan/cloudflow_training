# Beyond just files: Using PLM for versioning and metadata

## GSS

PLM server has its own implementation of GSS services. GSS has SOAP and REST services.
WSDL (SOAP): https://caxman.clesgo.net/jotne/GSS/FileWebService?wsdl
REST end point: https://caxman.clesgo.net/jotne/GSS/resources/plm

Java (Maven) client: https://github.com/CAxMan/PlmGSS-samples

PLM server is also accessible via GSS implementation by SINTEF.
Code samples: https://github.com/CAxMan/infrastructureClients/tree/master/gssClients

## Native services (SOAP)

Java (Maven) client: https://github.com/CAxMan/plm_soap_samples
Note, all code samples below are in Java. Java classes are generated by "axistools-maven-plugin" (version 1.4) from WSDL documents.

### Authentication in PLM database

There is group of SOAP services (Access) to perform authentication in PLM database
WSDL: https://caxman.clesgo.net/jotne/EDMWS/WSDLGenerator?accesscontrol=yes&user=simdm_user&password=db&option=LITERAL_ENCODING

The following methods from the Access group of services could use useful.
- **login** - to obtain session identifier that is used in any other services at one of parameters.
- **logout** - to close existing session. Existing session is closed automatically in 12 hours if no any services are called.

Example:
```Java
EDMAccessControlServiceLocator edmAccessControlServiceLocator = new EDMAccessControlServiceLocator();
String server = "https://caxman.clesgo.net/jotne";
EDMAccessControl edmAccessControl = edmAccessControlServiceLocator.getEDMWS(new URL(server + "/EDMWS/AccessControl?option=LITERAL_ENCODING"));
...
// login - can be valid Keystone token
// password - any not empty value in case of using valid Keystone token
// Keystone token works if corresponding user name is registered in PLM database
String sessionID = edmAccessControl.login("login", "sdai-group", "password");
...
String closeResult = edmAccessControl.logout(sessionID);
```

### Repositories and models

One more group of services (Config) has methods to handle repositories and models in PLM database.
WSDL: https://caxman.clesgo.net/jotne/EDMWS/WSDLGenerator?user=simdm_user&password=db&repository=SimDM_system&model=Config&schema=SimDM_config&querySchema=SimDM_config_support&option=LITERAL_ENCODING

Get available repositories and models:
```Java
SimDM_config_supportServiceLocator supportServiceLocator = new SimDM_config_supportServiceLocator();
SimDM_config_support configService = supportServiceLocator.getEDMWS();
...
V_repository[] repositories = configService.repository_list(sessionID); // sessionID - session identifier got from login method
```

Now required repository and model can be found by name
```Java
V_repository repo = null;
if (repositories != null) {
   for (V_repository r : repositories) {
       if ("name_you_are_looking".equals(r.getName())) {
           repo = r; // repository is found
           break;
       }
   }
}
```

Repository may contain multiple models. Required model can be found by name
```Java
V_model model = null;
V_model[] models = repo.getModels();
if (models != null) {
   for (V_model m : models) {
       if ("name_you_are_looking".equals(m.getName())) {
           model = m; // model is found
           break;
       }
   }
}
```

Repository or model can be deleted.
Note, To delete repository all models within repository should be deleted first.
```Java
configService.delete_model(sessionID, repo.getName(), model.getName(), null);
configService.delete_repository(sessionID, repo.getName());
```

If required repository or model is not yet exist, it can be created.

```Java
V_repository repo = configService.create_repository(sessionID, "repository_name", "description text");
V_model model = configService.create_model(sessionID, repo.getName(), "model_Name", "description text here", "PROJECT"); // "PROJECT" - hardcoded value in GSS
```
